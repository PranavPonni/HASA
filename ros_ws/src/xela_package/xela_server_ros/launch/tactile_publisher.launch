<launch>
    <arg name="ns" default=""/>
    <arg name="file" default="/etc/xela/xServ.ini"/>
    <arg name="port" default="5000"/>
    <arg name="ip"   default="127.0.0.1"/>
    <arg name="d"    default="0"/>

    <group
      if="$(eval arg('ns') != '')"
      ns="$(arg ns)">

      <node pkg="xela_server_ros"
            name="xela_server"
            type="xela_server"
            required="true"
            args="-f $(arg file) --port $(arg port) --ip $(arg ip)" />

      <node pkg="xela_server_ros"
            name="xela_service"
            type="xela_service"
            required="true"
            args="--port $(arg port) --ip $(arg ip) -d $(arg d)"
            launch-prefix='bash -c "sleep 1; exec \"$0\" \"$@\""'/>
    </group>

    <group unless="$(eval arg('ns') != '')">
      <node pkg="xela_server_ros"
            name="xela_server"
            type="xela_server"
            required="true"
            args="-f $(arg file) --port $(arg port) --ip $(arg ip)" />

      <node pkg="xela_server_ros"
            name="xela_service"
            type="xela_service"
            required="true"
            args="--port $(arg port) --ip $(arg ip) -d $(arg d)"
            launch-prefix='bash -c "sleep 1; exec \"$0\" \"$@\""'/>
    </group>
</launch>
